buildscript {
    repositories {
        // or Gradle plugins repository:
        maven { url "https://plugins.gradle.org/m2/" }
    }
    dependencies {
        // grabver versioning plugin
        classpath "eu.davidea:grabver:2.0.2"
    }
}

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.4.0'
    id 'org.jetbrains.dokka' version "1.4.0-rc"
    id 'com.github.johnrengelman.shadow' version '6.0.0'
    id 'eu.davidea.grabver' version '2.0.2'
    id 'net.researchgate.release' version '2.8.1'
}

versioning {
    // NOTE: versioning handled by grabver plugin (https://github.com/davideas/GrabVer)
    // Required (number)
    major 0 /* IMPORTANT: INCREASE AFTER EACH MAJOR CHANGE/FEATURE/ADDITION... */
    minor 1 /* IMPORTANT: INCREASE AFTER EACH NEW FEATURE... */
    // Optional, force custom patch (number)
    // patch 7 /* IMPORTANT: INCREASES AFTER EACH SHADOWJAR BUILD (TEST THIS)... */
    // Optional (any string)
    // preRelease "RC1"
    // Optional, custom task name to trigger the increase of the version
    incrementOn "incrementPatchVersion"
    // Optional, custom task name for which you want to save the versioning file
    saveOn "incrementPatchVersion"
}

group 'me.blocky.lib.klib'
version versioning.name
String name = "Kotlin Lib"

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.jetbrains.kotlin:kotlin-stdlib'
}

apply plugin: 'java'

tasks {
    shadowJar {
        getArchiveBaseName().set(name)
        getArchiveClassifier().set(null)
        getArchiveVersion().set(versioning.name)
        minimize()
        doLast {
            println("Created artifact $name-${versioning.name}")
        }
    }

    task incrementPatchVersion {}
}



